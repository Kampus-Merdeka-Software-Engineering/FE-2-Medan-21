<!DOCTYPE html>
<html lang="en">
<head>
    
    <title>Login Form</title>
    <link rel="stylesheet" href="css/style2.css">
</head>
<body>

        <div class="container">
          <h1>Login</h1>
          <form action="/formpostl" method="POST" id="loginForm">
                <label for="loginEmail">Email:</label>
                <input id="email" name="email" type="email" id="loginEmail" required>
                <br>
                <label for="loginPassword">Password:</label>
                <input id="password" name="password" type="password" id="loginPassword" required>
                <br>
                <button type="submit" onclick="login()">Login</button>

                <p> Dont Have An Account?
                    <a href="register.html">Click Here</a>
                  </p>
            </form>
        </div>     

    <script>
        // domain website
        const baseUrl = "localhost:3003/";

        // Simulasi basis data untuk menyimpan informasi pengguna
        //var userDatabase = [];

        function login() {
            var email = document.getElementById("loginEmail").value;
            var password = document.getElementById("loginPassword").value;

            const submitData = {
                email: email,
                password: password
            };

            // pakai API dari backend untuk login
            fetch(`${baseUrl}formpostl`, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify(submitData)
            })
            .then(response => response.json())
            .then((res) => {
                console.log("test", res)
                alert("login berhasil");
                window.location.href = `${baseUrl}login.html`;
            })
            .catch((error) => {
                alert(`Error Massage: ${error.massage}`);
            });

            /*
            // Periksa apakah pengguna ada di basis data
            var userExists = userDatabase.some(function(user) {
                return user.username === username && user.password === password;
            });

            if (userExists) {
                alert("Login berhasil!");
            } else {
                alert("Login gagal. Periksa kembali username dan password Anda.");
            }
            */
        }

        function register() {
            var name = document.getElementById("registerName").value;
            var username = document.getElementById("registerUsername").value;
            var password = document.getElementById("registerPassword").value;
            var email = document.getElementById("registerEmail").value;
            

            // data yang akan dikirimkan ke API register
            const submitData = {
                name: name,
                username: username,
                email: email,
                password: password
            };

            
            // pakai API dari backend untuk register
            fetch(`${baseUrl}formpostr`, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify(submitData)
            })
            .then(response => response.json())
            .then((res) => {
                console.log("test", res)
                alert("register berhasil");
                window.location.href = `${baseUrl}register.html`;
            })
            .catch((error) => {
                alert(`Error Massage: ${error.massage}`);
            });


            /*
            // Periksa apakah username sudah digunakan
            var usernameExists = userDatabase.some(function(user) {
                return user.username === username;
            });

            if (usernameExists) {
                alert("Username sudah digunakan. Pilih username lain.");
            } else {
                // Tambahkan pengguna baru ke basis data
                userDatabase.push({ username: username, password: password });
                alert("Registrasi berhasil!");
            }
            */
        }
    </script>
</body>
</html>
